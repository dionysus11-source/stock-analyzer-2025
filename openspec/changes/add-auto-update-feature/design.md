## 컨텍스트
- **애플리케이션**: `pyinstaller`를 사용하여 빌드되며, 단일 파일(`onefile`)이 아닌 여러 파일과 폴더로 구성된 배포판입니다. (`dist/main/`)
- **배포**: Github Releases를 통해 새로운 버전을 배포합니다.
- **목표**: 사용자가 프로그램을 실행했을 때, 새로운 버전이 있으면 자동으로 감지하고 업데이트하는 기능을 구현합니다.

## 목표 / 비목표
- **목표**:
    - Github Release의 최신 버전을 안정적으로 확인합니다.
    - 다중 파일 구조를 가진 애플리케이션을 안전하게 업데이트합니다.
    - 업데이트 후 애플리케이션을 자동으로 재시작합니다.
- **비목표**:
    - 관리자 권한 상승(elevation)을 요구하는 복잡한 설치 시나리오는 초기 버전에서 제외합니다.
    - 되돌리기(rollback) 기능은 초기 버전에 포함하지 않습니다.

## 결정 사항
### 결정: Github API를 이용한 버전 확인
- Github Releases 페이지를 직접 파싱하는 대신, `https://api.github.com/repos/{OWNER}/{REPO}/releases/latest` 엔드포인트를 사용하여 최신 릴리즈 정보를 가져옵니다.
- **이유**: 이 방식은 훨씬 안정적이며, 릴리즈의 `tag_name` (예: `v1.2.3`)을 현재 애플리케이션 버전과 명확하게 비교할 수 있습니다.
- **구현**: `_version.py` 파일에 저장된 현재 버전과 API를 통해 얻은 `tag_name`을 비교합니다.

### 결정: 업데이트 프로세스를 위한 배치 파일(Batch File) 생성 방식 채택
- PyInstaller로 빌드된 실행 파일(`main.exe`)이 직접 자신의 파일들을 교체하는 것은 어렵습니다. 따라서 다음과 같은 절차를 따릅니다.
    1. **업데이트 확인**: `main.exe`가 시작될 때 `auto_updater` 모듈을 통해 최신 버전을 확인합니다.
    2. **다운로드**: 새 버전이 감지되면, Github Release에 첨부된 압축 파일(예: `dist.zip`)을 임시 폴더( `%TEMP%` )에 다운로드하고 압축을 해제합니다.
    3. **배치 파일 생성**: 임시 폴더에 `update.bat` 파일을 동적으로 생성합니다. 이 배치 파일은 다음 작업을 수행합니다.
        - `main.exe` 프로세스가 종료되기를 기다립니다. (예: `taskkill` 또는 `timeout`)
        - 임시 폴더에 압축 해제된 새 버전의 파일들을 현재 애플리케이션이 설치된 폴더로 덮어씁니다. (예: `xcopy /Y /E`)
        - 임시 폴더와 `update.bat` 파일을 삭제합니다.
        - 새로운 `main.exe`를 실행하여 애플리케이션을 재시작합니다.
    4. **실행 및 종료**: `main.exe`는 `update.bat` 파일을 실행시킨 후 즉시 스스로 프로세스를 종료합니다.
- **이유**: 이 방식은 실행 중인 프로세스와 파일 시스템 간의 충돌을 피할 수 있는 가장 간단하고 신뢰성 있는 방법입니다. 별도의 `updater.exe`를 만드는 것보다 구현이 간단합니다.

## 위험 / 절충점
- **위험**: 업데이트 도중 사용자가 컴퓨터를 강제로 끄거나 배치 파일 실행을 중단하면 애플리케이션이 불안정한 상태가 될 수 있습니다.
- **절충**: 초기 버전에서는 이 위험을 감수하고, 향후 백업 및 복구 로직을 추가하여 안정성을 높일 수 있습니다.

## 버전 관리
- `_version.py` 파일에 `__version__ = "X.Y.Z"` 형식으로 버전을 명시하고 애플리케이션 전체에서 이 변수를 참조합니다.
- Github Release의 태그 이름은 `vX.Y.Z` 형식으로 통일하여 버전 비교를 용이하게 합니다.
